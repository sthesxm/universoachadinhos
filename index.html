<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Universo Promo e Achadinhos 💛🏠 | Entrar no Grupo</title>
  <!-- Performance: acelera primeira ida ao destino -->
  <link rel="preconnect" href="https://sndflw.com" crossorigin>

  <!-- Meta Pixel -->
  <script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');

  fbq('init', '734806152953802');
  // 🚫 Bloqueia eventos automáticos (como Subscribe)
  fbq('set', 'autoConfig', false, '734806152953802');
  fbq('track', 'PageView');
  </script>
  <!-- End Meta Pixel -->

  <style>
    :root{
      /* Gradiente principal (header e botões) */
      --pink:#4d046e;       /* roxo */
      --pink-dark:#8d004c;  /* rosa escuro */

      /* Barra de progresso (amarelo gema) */
      --amber:#FFC107;
      --amber-dark:#FFC107;

      --white:#ffffff;
      --gray:#555;
      --muted:#777;
      --shadow:0 10px 25px rgba(0,0,0,.1);
      --radius:18px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      background:#fff;color:#222;padding-bottom:80px;
    }

    header{
      background: linear-gradient(135deg, var(--pink) 0%, var(--pink-dark) 100%);
      padding:20px 20px 26px;text-align:center;
      border-radius:0 0 28px 28px;color:var(--white);
      box-shadow:var(--shadow);
      animation:hdrIn .6s ease both;
    }
    @keyframes hdrIn{
      from{opacity:0; transform:translateY(-8px)}
      to{opacity:1; transform:translateY(0)}
    }

    .logo-wrap{
      width:120px;height:120px;margin:0 auto 12px;border-radius:50%;
      background:#fff;display:flex;align-items:center;justify-content:center;
      box-shadow:0 8px 20px rgba(0,0,0,.2);overflow:hidden;
    }
    .logo-wrap img{
      width:100%;height:100%;object-fit:cover;object-position:center;border-radius:50%;
    }
    h1{font-size:28px;font-weight:800;margin-bottom:6px;}
    .subtitle{font-size:15px;color:#f1f1f1;margin-bottom:10px;}

    /* Barra de vagas */
    .vacancy-wrap{max-width:600px;margin:6px auto 12px;text-align:center;}
    .vacancy-top{font-weight:800;font-size:17px;margin-bottom:6px;}
    .bar{
      width:100%;height:16px;background:#f9f9f9;
      border:2px solid #eee;border-radius:999px;
      position:relative;overflow:hidden;
    }
    .bar>.fill{
      position:absolute;inset:0 100% 0 0;
      background:var(--amber); /* amarelo gema sólido */
      border-radius:999px;transition:inset .5s ease;
      /* brilho diagonal sutil correndo por cima */
      overflow: hidden;
    }
    .bar>.fill::after{
      content:"";
      position:absolute; top:0; bottom:0; left:-40%;
      width:40%;
      background:linear-gradient(120deg, transparent 0%, rgba(255,255,255,.4) 50%, transparent 100%);
      transform:skewX(-20deg);
      animation:barSheen 2.2s linear infinite;
      pointer-events:none;
    }
    @keyframes barSheen{
      from{left:-40%}
      to{left:110%}
    }

    /* CTA */
    .cta-section{text-align:center;margin:10px auto 0;padding:15px;max-width:700px;}

    /* Prova social compacta acima do botão (fonte maior) */
    .micro-trust{
      font-size:15px;
      color:#3a3a3a;
      margin:10px 0 12px 0;
      font-weight:700;
    }
    .micro-trust strong{font-weight:900}

    .cta-btn{
      position:relative;
      overflow:hidden;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:16px 32px;width:100%;
      border-radius:999px;font-weight:900;font-size:18px;letter-spacing:.2px;
      background:linear-gradient(180deg,var(--pink),var(--pink-dark));
      color:#fff;border:none;cursor:pointer;
      animation:pulse 1.6s ease-in-out infinite;
      box-shadow:0 10px 25px rgba(141,0,76,.35);
      transition:transform .08s ease, opacity .2s ease;
    }
    /* Shine que varre o botão periodicamente */
    .cta-btn::after{
      content:"";
      position:absolute; top:0; bottom:0; left:-20%;
      width:20%;
      background:linear-gradient(120deg, transparent 0%, rgba(255,255,255,.45) 50%, transparent 100%);
      transform:skewX(-20deg);
      animation:shine 3.5s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes shine{
      0%,60%{left:-25%}
      70%{left:110%}
      100%{left:110%}
    }

    .cta-btn[disabled]{opacity:.7;cursor:not-allowed;animation:none}
    .spinner{
      width:18px;height:18px;border:2px solid rgba(255,255,255,.35);border-top-color:#fff;border-radius:50%;
      display:none; /* aparece durante o clique */
      animation:spin .7s linear infinite;
    }
    .cta-btn.loading .spinner{display:inline-block;}
    @keyframes spin{to{transform:rotate(360deg)}}
    @keyframes pulse{0%,100%{transform:scale(1);}50%{transform:scale(1.06);}}

    /* Feed */
    .feed{
      margin:18px auto 12px;max-width:500px;background:#f0f0f0;
      border:1px solid #ccc;border-radius:16px;padding:12px;
    }
    .notif{
      display:flex;align-items:center;gap:10px;background:#fff;padding:10px;border-radius:12px;
      margin-bottom:10px;border:1px solid #eee;font-size:14px;font-weight:600;
      opacity:0;transform:translateY(-20px);animation:slideDown .4s ease forwards;
    }
    .notif .badge{
      background:rgba(46,204,113,.15);border:1px solid rgba(46,204,113,.3);
      color:#1e8e3e;font-weight:800;font-size:13px;padding:6px 8px;border-radius:999px;
    }
    @keyframes slideDown{to{opacity:1;transform:translateY(0);}}

    /* Vantagens */
    .benefits{max-width:700px;margin:8px auto;padding:0 15px;}
    .benefit{
      display:flex;align-items:center;gap:14px;
      background:rgba(77,4,110,0.10);
      border-radius:16px;padding:14px 16px;margin-bottom:14px;
      border:1px solid var(--pink);box-shadow:0 4px 10px rgba(0,0,0,0.05);
    }
    .emojibox{
      width:46px;height:46px;min-width:46px;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg,var(--pink),var(--pink-dark));
      border-radius:12px;font-size:22px;color:#fff;
      transition:transform .15s ease;
    }
    .benefit:hover .emojibox{ transform: translateY(-2px) }

    /* Rodapé fixo */
    .sticky-footer{
      position:fixed;bottom:0;left:0;right:0;background:#111;color:#fff;
      padding:12px 16px;box-shadow:0 -8px 20px rgba(0,0,0,.2);
      display:flex;align-items:center;justify-content:space-between;z-index:50;
    }
    .sticky-footer div{font-weight:700;}
    .sticky-btn{
      background:linear-gradient(180deg,var(--pink),var(--pink-dark));
      color:#fff;border:none;border-radius:999px;padding:14px 26px;
      font-weight:800;font-size:15px;cursor:pointer;
      box-shadow:0 6px 16px rgba(141,0,76,.35);margin-left:10px;
      animation:footPulse 6s ease-in-out infinite;
    }
    @keyframes footPulse{
      0%,92%,100%{transform:scale(1)}
      95%{transform:scale(1.04)}
      98%{transform:scale(1.06)}
    }

    /* Acessibilidade: respeita preferências de reduzir movimentos */
    @media (prefers-reduced-motion: reduce){
      *, *::before, *::after{ animation: none !important; transition: none !important }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-wrap">
      <img src="https://i.postimg.cc/zXgQ7svW/Achadinhos.png" alt="Universo Promo e Achadinhos">
    </div>
    <h1>Universo Promo e Achadinhos 💛🏠</h1>
    <div class="subtitle">As melhores promoções de casa, cozinha, beleza moda e mais no seu WhatsApp.</div>
  </header>

  <section class="cta-section">
    <div class="vacancy-wrap">
      <div class="vacancy-top"><span id="vacancyText">Últimas vagas de hoje • Restam 24 👇</span></div>
      <div class="bar"><div class="fill" id="fillBar"></div></div>
    </div>

    <!-- Micro prova social -->
    <div class="micro-trust">✅ <strong>+7.200 membros</strong> · 🎯 <strong>1 clique, sem cadastro</strong> · 🚫 Sem spam · ⏱️ Pode sair quando quiser</div>

    <button id="ctaMain" class="cta-btn">
      <span>ENTRAR GRÁTIS NO GRUPO</span>
      <span class="spinner" aria-hidden="true"></span>
    </button>

    <div class="feed" id="feed"></div>
  </section>

  <section class="benefits">
    <div class="benefit">
      <div class="emojibox">🔥</div>
      <div class="benefit-text">
        <h4>Descontos Insanos</h4>
        <p>Produtos com até 70% OFF</p>
      </div>
    </div>
    <div class="benefit">
      <div class="emojibox">🎟</div>
      <div class="benefit-text">
        <h4>Cupons Exclusivos</h4>
        <p>Só para membros do grupo</p>
      </div>
    </div>
    <div class="benefit">
      <div class="emojibox">👀</div>
      <div class="benefit-text">
        <h4>Itens em Alta</h4>
        <p>Os mais desejados do momento</p>
      </div>
    </div>
    <div class="benefit">
      <div class="emojibox">✅</div>
      <div class="benefit-text">
        <h4>Ofertas Verificadas</h4>
        <p>Promoções reais e testadas</p>
      </div>
    </div>
  </section>

  <div class="sticky-footer">
    <div>⏳ Últimas vagas de hoje</div>
    <button id="ctaFooter" class="sticky-btn">Entrar no grupo</button>
  </div>

  <script>
    // URL base (mantém centralizada aqui)
    const WHATS_LINK="https://sndflw.com/i/universoachadinhos";

    const START_VACANCIES=24, MIN_VACANCIES=2;
    const feedEl=document.getElementById('feed');
    const vacancyText=document.getElementById('vacancyText');
    const fillBar=document.getElementById('fillBar');

    const NAMES_POOL=[
      "Francisca Lacerda","Rosália Maria","Maria Júlia Souza","Ana Beatriz Nogueira","Josefa Almeida",
      "Tereza Lemos","Joana Prado","Helena Barbosa","Cecília Andrade","Laura Pacheco","Clara Moreira",
      "Isabel Figueira","Marta Azevedo","Aurora Fernandes","Olívia Castro","Beatriz Siqueira",
      "Lúcia Nunes","Ester Carvalho","Camila Duarte","Regina Campos","Noêmia Teixeira","Paula Rezende",
      "Marina Peixoto","Cristina Moura","Vitória Lopes","Sueli Brito","Rita Xavier","Elisa Cardoso",
      "Lorena Ribeiro","Graça Monteiro","Helena Antunes","Patrícia Rocha","Juliana Costa","Madalena Correia",
      "Adélia Vieira","Celina Pinto","Renata Tavares","Gabriela Melo","Sônia Gonçalves","Daniela Farias"
    ];
    function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr;}
    let namesQueue=shuffle([...NAMES_POOL]);

    let currentVacancies = parseInt(localStorage.getItem("currentVacancies")) || START_VACANCIES;
    function normalizeDateStr(d){return new Date(d.getFullYear(), d.getMonth(), d.getDate()).toDateString();}
    const todayStr = normalizeDateStr(new Date());
    const lastResetDate = localStorage.getItem("lastResetDate");
    if (lastResetDate !== todayStr) { resetVacancies(); }
    scheduleMidnightReset();

    function resetVacancies(){
      currentVacancies = START_VACANCIES;
      localStorage.setItem("currentVacancies", currentVacancies);
      localStorage.setItem("lastResetDate", normalizeDateStr(new Date()));
      updateVacancyUI();
    }
    function scheduleMidnightReset(){
      const now = new Date();
      const nextMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0);
      const msToMidnight = nextMidnight.getTime() - now.getTime();
      setTimeout(() => {
        resetVacancies();
        setInterval(resetVacancies, 24*60*60*1000);
      }, msToMidnight);
    }
    function updateVacancyUI(){
      vacancyText.textContent=`Últimas vagas de hoje • Restam ${currentVacancies} 👇`;
      const filled=(START_VACANCIES-currentVacancies)/(START_VACANCIES-MIN_VACANCIES);
      const pct=Math.max(0,Math.min(1,filled));
      fillBar.style.inset=`0 ${(1-pct)*100}% 0 0`;
    }
    function step(){
      if(currentVacancies<=MIN_VACANCIES) return;
      if(namesQueue.length===0) namesQueue=shuffle([...NAMES_POOL]);
      const name=namesQueue.shift();
      pushNotification(name);
      currentVacancies--;
      localStorage.setItem("currentVacancies", currentVacancies);
      updateVacancyUI();
      if(currentVacancies>MIN_VACANCIES){
        const nextMs=[1000,2000,3000][Math.floor(Math.random()*3)];
        setTimeout(step,nextMs);
      }
    }
    function pushNotification(name){
      const row=document.createElement('div');
      row.className='notif';
      row.innerHTML=`<div class="badge">✅</div><div><strong>${name}</strong> entrou no grupo</div>`;
      if(feedEl.firstChild){ feedEl.insertBefore(row,feedEl.firstChild); }
      else{ feedEl.appendChild(row); }
      if(feedEl.children.length>3){ feedEl.removeChild(feedEl.lastChild); }
    }

    // ===== Conversão: Deep-link para WhatsApp + dedupe de Lead =====
    function uuidv4(){
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
        const r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);
        return v.toString(16);
      });
    }

    function openWhatsAppSmart(){
      const eventId = 'lead-' + uuidv4(); // útil se um dia usar CAPI (dedupe)
      try{ fbq('track','Lead',{event_id: eventId}); }catch(e){}

      const ua = navigator.userAgent || '';
      const isAndroid = /Android/i.test(ua);
      const isIOS = /iPhone|iPad|iPod/i.test(ua);

      // 1) Tenta abrir app nativo (Android/iOS) quando possível
      if (isAndroid) {
        // Intent (Android) com fallback automático ao navegador
        const intentUrl = `intent://send/#Intent;scheme=whatsapp;package=com.whatsapp;end`;
        window.location.href = WHATS_LINK;          // seu encurtador (tracking/roteamento)
        setTimeout(()=>{ window.location.href = intentUrl; }, 150); // tenta app
      } else if (isIOS) {
        // iOS: tenta app primeiro, depois link web
        window.location.href = 'whatsapp://';
        setTimeout(()=>{ window.location.href = WHATS_LINK; }, 150);
      } else {
        // Desktop: manda para link web
        window.location.href = WHATS_LINK;
      }

      // Fallback adicional para garantir abertura mesmo se bloqueado
      setTimeout(()=>{ window.open(WHATS_LINK, '_blank'); }, 1500);
    }

    function handleClick(e){
      const btn = e.currentTarget;
      btn.classList.add('loading');
      btn.setAttribute('disabled','true');
      openWhatsAppSmart();
      // Reativa após alguns segundos, caso usuário volte
      setTimeout(()=>{ btn.classList.remove('loading'); btn.removeAttribute('disabled'); }, 4000);
    }

    document.getElementById('ctaMain').addEventListener('click',handleClick);
    document.getElementById('ctaFooter').addEventListener('click',handleClick);

    window.addEventListener('load',()=>{
      updateVacancyUI();
      if(currentVacancies>MIN_VACANCIES){ setTimeout(step,1000); }
      // (Sem ViewContent extra)
    });
  </script>
</body>
</html>

